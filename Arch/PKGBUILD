# Maintainer: Federico Cinelli <cinelli@aur.archlinux.org> [community]

pkgname=texmaker-breeze
_pkgname=texmaker
pkgver=4.4.1
pkgrel=1
pkgdesc='Free cross-platform LaTeX editor, integrate better with KDE (Plasma5 / KF5)'
arch=('i686' 'x86_64')
url="http://www.xm1math.net/texmaker/index.html"
license=('GPL')
depends=('poppler-qt5' 'qt5-webkit' 'qt5-script' 'desktop-file-utils')
optdepends=('ghostscript: LaTeX to HTML conversion command'
            'poppler: PDF rendering support')
install="$pkgname.install"
conflicts=('texmaker')
source=("http://www.xm1math.net/$_pkgname/$_pkgname-$pkgver.tar.bz2"
        "https://github.com/gustawho/$pkgname/archive/master.zip")
md5sums=('d6af622aa9ab1ec29c799842f2b76dc7')
         'SKIP')

prepare() {
  cp -f $srcdir/$_pkgname-master/images/breeze/* "$srcdir/$_pkgname-$pkgver/images/"
  cp -f $srcdir/$_pkgname-master/utilities/* "$srcdir/$_pkgname-$pkgver/utilities/"
}

build() {
  cd "$_pkgname-$pkgver"
  qmake-qt5 PREFIX=/usr texmaker.pro
  make
}

package() {
  cd "$srcdir/$_pkgname-$pkgver"
  install -dm755 "$pkgdir/usr/share"
  make INSTALL_PATH="$pkgdir" INSTALL_ROOT="$pkgdir" PREFIX="/usr" install
}
